<!DOCTYPE html>
<html>
<head>
  <title>PeerJS Video Call Example</title>
  <script src="https://cdn.jsdelivr.net/npm/peerjs@1.3.2/dist/peer.min.js"></script>
</head>
<body>
  <h1>PeerJS Video Call Example</h1>
  <div id="my-video"></div>
  <div id="remote-video"></div>

  <script>
    // Generate a unique ID for the user
    const peer = new Peer();

    // Get access to the user's camera and microphone
    navigator.mediaDevices.getUserMedia({ video: true, audio: true })
      .then(stream => {
        const myVideo = document.getElementById('my-video');
        myVideo.srcObject = stream;
        myVideo.play();

        // Connect to the peer with the specified ID
        peer.on('open', id => {
          console.log('My peer ID is: ' + id);
          const call = peer.call('remote-peer-id', stream);

          // Answer the incoming call
          peer.on('call', incomingCall => {
            incomingCall.answer(stream);
            const remoteVideo = document.getElementById('remote-video');
            incomingCall.on('stream', remoteStream => {
              remoteVideo.srcObject = remoteStream;
              remoteVideo.play();
            });
          });
        });
      })
      .catch(error => {
        console.error('Error accessing media devices:', error);
      });
  </script>
</body>
</html>
