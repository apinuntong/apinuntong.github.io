<!DOCTYPE html>
<html>
<head>
  <title>PeerJS Video Call</title>
  <style>
    #localVideo, #remoteVideo {
      width: 400px;
      height: 300px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>PeerJS Video Call</h1>

  <video id="localVideo" autoplay></video>
  <video id="remoteVideo" autoplay></video>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.2.0/peerjs.min.js"></script>
  <script>
    // Initialize Peer object
    var peer = new Peer('tong555533');

    // Get local video and display it
    navigator.mediaDevices.getUserMedia({ video: true, audio: false })
      .then(function(stream) {
        var localVideo = document.getElementById('localVideo');
        localVideo.srcObject = stream;
      })
      .catch(function(error) {
        console.error('Error accessing local media: ', error);
      });

    // Event handler when Peer object receives a connection
    peer.on('connection', function(conn) {
      conn.on('open', function() {
        console.log('Connected to another peer');

        // Event handler when receiving data from the remote peer
        conn.on('data', function(data) {
          // Handle received data (in this case, video frames)
          var remoteVideo = document.getElementById('remoteVideo');
          remoteVideo.src = URL.createObjectURL(data);
        });
      });
    });

    // Function to handle errors
    peer.on('error', function(error) {
      console.error('PeerJS error: ', error);
    });
  </script>
</body>
</html>
